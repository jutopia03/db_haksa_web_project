{% extends "base.html" %}

{% block title %}내 수강내역 / 성적{% endblock %}
{% block layout %}total-layout{% endblock %}

{% block sidebar %}
<aside class="total-sidebar">
    <div class="total-menu-header">메뉴</div>
    <ul class="total-menu">
        <li><a href="{{ url_for('student.dashboard') }}">대시보드</a></li>
        <li><a href="{{ url_for('student.profile') }}">내 정보</a></li>
        <li class="active"><a href="{{ url_for('student.enrollments') }}">수강내역</a></li>
    </ul>
</aside>
{% endblock %}

{% block content %}
<section class="total-main">

    <h2>내 수강내역 / 성적</h2>
    <hr>

    <!-- 검색 영역 전체 (왼쪽 검색 + 오른쪽 전체보기 버튼) -->
    <div class="search-wrapper">

        <!-- 왼쪽: 연도 / 학기 / 조회 -->
        <form method="get" class="search-left">
            <input type="number"
                   name="year"
                   value="{{ selected_year or '' }}"
                   class="form-control search-input"
                   placeholder="년도">

            <input type="number"
                   name="semester"
                   value="{{ selected_semester or '' }}"
                   class="form-control search-input"
                   placeholder="학기">

            <button type="submit" class="btn btn-primary search-btn">
                조회
            </button>
        </form>

        <!-- 오른쪽: 전체 보기 버튼 -->
        <div class="search-right">
            <a href="{{ url_for('student.enrollments') }}"
               class="btn btn-secondary search-btn">
                전체 보기
            </a>
        </div>
    </div>


    {% if enrollments and enrollments|length > 0 %}
      <table class="table table-bordered table-hover">
        <thead class="table-light">
          <tr>
            <th>연도</th>
            <th>학기</th>
            <th>강좌번호</th>
            <th>강좌명</th>
            <th>담당교수</th>
            <th>학점</th>
            <th>성적</th>
          </tr>
        </thead>
        <tbody>
          {% for e in enrollments %}
            <tr>
              <td>{{ e.year }}</td>
              <td>{{ e.semester }}</td>
              <td>{{ e.course_id }}</td>
              <td>{{ e.course_name }}</td>
              <td>{{ e.professor }}</td>
              <td>{{ e.credit }}</td>
              <td>{{ e.grade }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p>조회된 수강내역이 없습니다.</p>
    {% endif %}

</section>
{% endblock %}
